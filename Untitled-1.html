<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Explore and Travel</title>

  <!-- ğŸ”¹ ĞŸÑ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ ÑˆÑ€Ğ¸Ñ„Ñ‚Ñ–Ğ² Ñ– ÑÑ‚Ğ¸Ğ»Ñ–Ğ² -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div class="logo">ğŸŒ Explore & Travel</div>
    <nav>
      <ul>
        <li><a href="#list">Home</a></li>
        <li><a href="#create">Create</a></li>
        <li><a href="#edit">Edit</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- ğŸ”¹ HERO SECTION -->
    <section class="hero">
      <div class="hero__content">
        <h1>Discover the world with us</h1>
        <p>Find your next destination or add your own travel experience!</p>
        <button id="createBtn" class="btn">Create your destination</button>
      </div>
      <div class="hero__image">
        <img src="images/2.jpg" alt="Travel image">
      </div>
    </section>

    <!-- ğŸ”¹ FEATURED DESTINATIONS -->
    <section id="list">
      <h2>Featured Destinations</h2>
      <div id="destGrid" class="grid"></div>
    </section>

    <!-- ğŸ”¹ CREATE SECTION -->
    <section id="create">
      <h2>Create New Destination</h2>
      <form id="createForm">
        <label>Name:</label>
        <input type="text" id="name" required pattern="[A-Za-z\s]+" placeholder="e.g. Bali">

        <label>Country:</label>
        <input type="text" id="country" required>

        <label>Price ($):</label>
        <input type="number" id="price" required min="100">

        <label>Days:</label>
        <input type="number" id="days" required min="1">

        <label>Rating (1â€“5):</label>
        <input type="number" id="rating" required min="1" max="5" step="0.1">

        <label>Image URL:</label>
        <input type="text" id="image" required placeholder="images/3.jpg">

        <button class="btn" type="submit">Add Destination</button>
      </form>
    </section>

    <!-- ğŸ”¹ EDIT SECTION -->
    <section id="edit">
      <h2>Edit Destination</h2>
      <form id="findForm">
        <label>Enter ID to Edit:</label>
        <input type="number" id="editId" required>
        <button class="btn" type="button" id="loadBtn">Load</button>
      </form>

      <form id="editForm" style="display:none;">
        <label>Name:</label>
        <input type="text" id="editName" required>
        <label>Country:</label>
        <input type="text" id="editCountry" required>
        <label>Price ($):</label>
        <input type="number" id="editPrice" required min="100">
        <label>Days:</label>
        <input type="number" id="editDays" required min="1">
        <label>Rating:</label>
        <input type="number" id="editRating" required min="1" max="5">
        <label>Image URL:</label>
        <input type="text" id="editImage" required>
        <button class="btn" type="submit">Save Changes</button>
      </form>
    </section>
  </main>

  <footer>
    <p>Â© 2025 Explore and Travel. All rights reserved.</p>
  </footer>

  <!-- ğŸ”¹ MODAL WINDOW -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <p id="modalText"></p>
      <button class="btn" id="closeModal">OK</button>
    </div>
  </div>

  <!-- ğŸ”¹ JAVASCRIPT -->
  <script>
    // --------------------
// CONNECT TO BACKEND
// --------------------
const API = "http://localhost:3000/destinations";
let destinations = [];

// --------------------
// LOAD LIST FROM SERVER
// --------------------
async function loadDestinations() {
  try {
    const res = await fetch(API);
    destinations = await res.json();
    renderList();
  } catch (err) {
    console.error("Fetch error:", err);
  }
}

loadDestinations();

// --------------------
// RENDER CARDS
// --------------------
const grid = document.getElementById("destGrid");

function renderList() {
  grid.innerHTML = "";
  destinations.forEach(dest => {
    grid.insertAdjacentHTML("beforeend", `
      <div class="card">
        <img src="${dest.image}" alt="${dest.name}">
        <h3>${dest.name}</h3>
        <p>${dest.country}</p>
        <p>ğŸ’° ${dest.price}$ | â­ ${dest.rating} | ğŸ“… ${dest.days} days</p>
        <small>ID: ${dest.id}</small>
      </div>
    `);
  });
}

// --------------------
// MODAL WINDOW
// --------------------
const modal = document.getElementById("modal");
const modalText = document.getElementById("modalText");
const closeModal = document.getElementById("closeModal");

closeModal.onclick = () => modal.style.display = "none";

function showModal(text) {
  modalText.textContent = text;
  modal.style.display = "flex";
}

// --------------------
// CREATE NEW DESTINATION
// --------------------
document.getElementById("createForm").addEventListener("submit", async e => {
  e.preventDefault();

  const newDest = {
    name: document.getElementById("name").value.trim(),
    country: document.getElementById("country").value.trim(),
    price: parseFloat(document.getElementById("price").value),
    days: parseInt(document.getElementById("days").value),
    rating: parseFloat(document.getElementById("rating").value),
    image: document.getElementById("image").value.trim()
  };

  try {
    await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(newDest)
    });

    await loadDestinations();
    showModal("âœ” Destination added!");
    e.target.reset();

  } catch (err) {
    console.error("POST error:", err);
  }
});


// --------------------
// LOAD DESTINATION FOR EDIT
// --------------------
const loadBtn = document.getElementById("loadBtn");
const editForm = document.getElementById("editForm");

loadBtn.addEventListener("click", async () => {
  const id = parseInt(document.getElementById("editId").value);
  const res = await fetch(`${API}/${id}`);

  if (!res.ok) return showModal("âŒ Destination not found!");

  const found = await res.json();

  editForm.style.display = "block";
  editName.value = found.name;
  editCountry.value = found.country;
  editPrice.value = found.price;
  editDays.value = found.days;
  editRating.value = found.rating;
  editImage.value = found.image;

  editForm.onsubmit = async e => {
    e.preventDefault();

    const updated = {
      name: editName.value,
      country: editCountry.value,
      price: parseFloat(editPrice.value),
      days: parseInt(editDays.value),
      rating: parseFloat(editRating.value),
      image: editImage.value
    };

    await fetch(`${API}/${id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(updated)
    });

    await loadDestinations();
    showModal("âœ” Changes saved!");
    editForm.style.display = "none";
  };
});

// --------------------
// SCROLL TO CREATE SECTION
// --------------------
document.getElementById("createBtn").addEventListener("click", () => {
  document.querySelector("#create").scrollIntoView({ behavior: "smooth" });
});

  </script>
</body>
</html>
